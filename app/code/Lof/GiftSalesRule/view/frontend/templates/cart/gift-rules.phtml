<?php
/**
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Lof ElasticSuite to newer
 * versions in the future.
 *
 *
 * @category  Lof
 * @package   Lof\GiftSalesRule
 * @author    Landofcoder <landofcoder@gmail.com>
 * @copyright 2020 Landofcoder
 * @license   http://www.landofcoder.com/LICENSE-1.0.html
 */

/** @var $block \Lof\GiftSalesRule\Block\Cart\GiftRules */
$giftRules = $block->getGiftRules();
$helper             = $this->helper("Lof\GiftSalesRule\Helper\Config");
$buttonLabel = $helper->getButtonLabel();
$buttonLabel = $buttonLabel?$buttonLabel:__("Get free gift!");
?>

<?php if ($giftRules) : ?>
    <?php
    /** @var \Lof\GiftSalesRule\Block\Cart\GiftRules\Rule $childBlock */
    $childBlock = $block->getChildBlock('checkout.cart.gift-rules.rule');
    ?>
    <div class="block free-gift" id="block-free-gift"
         data-mage-init='{"collapsible":{"openedState": "active", "saveState": false}}'>
        <div class="title" data-role="title">
            <strong id="block-free-gift-heading" role="heading" aria-level="2"><?= /* @escapeNotVerified */
                $buttonLabel; ?></strong>
        </div>
        <div class="content" data-role="content" aria-labelledby="block-free-gift-heading">
            <?php foreach ($giftRules as $rule) : ?>
                <?= $childBlock->setGiftRule($rule)->toHtml(); ?>
            <?php endforeach; ?>
        </div>
    </div>
<?php endif; ?>
